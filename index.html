<!DOCTYPE html>
<html>
    <head>
		<script src="/socket.io/socket.io.js"></script>
        <script src="http://code.jquery.com/jquery-latest.min.js"></script>
        <link rel="stylesheet" href="//code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css">
        <script src="//code.jquery.com/jquery-1.10.2.js"></script>
        <script src="//code.jquery.com/ui/1.11.1/jquery-ui.js"></script>
	</head>
        <body>
			<div style="background-color: blanchedalmond; width: 500px; height: 500px;">
			<canvas id="Player" width="500px" height="500px" style="position: absolute;"></canvas>
			<canvas id="Player2" width="500px" height="500px" style="position: absolute;"></canvas>
			</div>
		</body>
		<script>
		jQuery(function($){
		var socket = io.connect();
socket.on('PlayerSpawn', function(PlayerCooordsX, PlayerCooordsY, PlayerPosition){
		console.log(PlayerPosition);
					if(PlayerPosition == 1){
					var e=document.getElementById("Player");
					var canv=e.getContext("2d");
					}else if(PlayerPosition == 2){
					var e=document.getElementById("Player2");
					var canv=e.getContext("2d");
					}
					canv.fillStyle = "rgb(200,0,0)";
					canv.fillRect (PlayerCooordsX, PlayerCooordsY, 50, 50);
});
socket.on('PlayerMovment', function(PlayerCooordsX, PlayerCooordsY, PlayerPosition, Direction){
console.log(PlayerPosition+" Hat Movment ausgelöst");
	if(PlayerPosition == 1){
			var e=document.getElementById("Player");
			var canv=e.getContext("2d");
		}else if(PlayerPosition == 2){
			var e=document.getElementById("Player2");
			var canv=e.getContext("2d");
		}
		if(Direction == "Left"){
				PlayerCooordsX = PlayerCooordsX + 1; // Sende Old Positionen Mit
				canv.clearRect(PlayerCooordsX,PlayerCooordsY,50,50);
				PlayerCooordsX = PlayerCooordsX - 1;
		}else if(Direction == "Down"){
				PlayerCooordsY--;
				canv.clearRect(PlayerCooordsX,PlayerCooordsY,50,50);
				PlayerCooordsY++;
		}else if(Direction == "Right"){
				PlayerCooordsX--;
				canv.clearRect(PlayerCooordsX,PlayerCooordsY,50,50);
				PlayerCooordsX++;
		}else if(Direction == "Jump"){
				PlayerCooordsY++;
				canv.clearRect(PlayerCooordsX,PlayerCooordsY,50,50);
				PlayerCooordsY--;
		}
		canv.fillStyle = "rgb(200,0,0)";
		canv.fillRect(PlayerCooordsX,PlayerCooordsY,50,50);
});			
$(document).keypress(function(event) {
			if(event.which === 65 || event.which === 97) {
			//Move Left
			socket.emit("PlayerMovment", "Left");
			}else if(event.which === 83 || event.which === 115){
			//Move Down
			socket.emit("PlayerMovment", "Down");
			}else if(event.which === 68 || event.which === 100){
			//Move Right
			console.log("d wurde gedrückt"); 
			socket.emit("PlayerMovment", "Right");
			}else if(event.which === 87 || event.which === 119){
			//Move - Jump
			console.log("w wurde gedrückt"); 
			socket.emit("PlayerMovment", "Jump");
			}
});
			
			
			});
			/*function myLoop () {          
				myVar = setTimeout(function () {  
					BallMovment();   
					i++;                  
					if (i < 999999999999999999999999999999999999999999999999999999999999999) {            
						myLoop();             
					}                   
					
				}, 1000.0/30.0)
			}
			myLoop();   */                   //  start the loop
</script>
</html>